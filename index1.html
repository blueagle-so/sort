<!DOCTYPE html>
<html lang='ru'>
<head>
<link rel="stylesheet" href="/css/qwerty.wiki.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Полифазная сортировка слиянием - Polyphase merge sort - qaz.wiki</title>

<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- Yandex.Metrika counter --> <script type="text/javascript" > (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://cdn.jsdelivr.net/npm/yandex-metrica-watch/tag.js", "ym"); ym(55254025, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true }); </script> <noscript><div><img src="https://mc.yandex.ru/watch/55254025" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->



<!-- ADV -->
<script async type="text/javascript" src="//clickio.mgr.consensu.org/t/consent_220206_V3.js"></script><script src="/js/my.js"></script>
<script async type="text/javascript" src="//s.clickiocdn.com/t/220206/360_light.js"></script>
<script src='https://yastatic.net/pcode/adfox/loader.js' crossorigin='anonymous' async></script>
<!-- GA: false-->
<!-- /ADV -->

</head>

<!-- Desktop version -->
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject mw-editable">


<!-- CLICKIO AdFox unit 651566 -->
<div id='adfox_157546550881883587'></div>
<script>
    (function(w, n) {
w[n] = w[n] || [];
w[n].push([{
        ownerId: 257193,
        containerId: 'adfox_157546550881883587',
        params: {
            pp: 'wxi',
            ps: 'dszq',
            p2: 'gnsj'
        }
    }, [ 'phone'], {
        tabletWidth: 1024,
        phoneWidth: 767,
        isAutoReloads: false
    }]);})(window, 'adfoxAsyncParamsAdaptive');
</script>
<script class='__lxGc__' type='text/javascript'>
((__lxGc__=window.__lxGc__||{'s':{},'b':0})['s']['_220206']=__lxGc__['s']['_220206']||{'b':{}})['b']['_671635']={'i':__lxGc__.b++};
</script>
<script class='__lxGc__' type='text/javascript'>
((__lxGc__=window.__lxGc__||{'s':{},'b':0})['s']['_220206']=__lxGc__['s']['_220206']||{'b':{}})['b']['_671633']={'i':__lxGc__.b++};
</script>
<img class="adsbygoogle" id="jahYiepai2Rash0K" src="/img/1x1.png" />

<!-- PAGE_ID: 17509736 - Polyphase_merge_sort -->

    <div id="mw-panel" class="otherLangs">
        <div class="portal">
            <div class="ico-title">
                <a href="/"><img src="/favicon-96x96.png" class="logo"></a>
            </div>
            <hr>
            <div>
                <div style="min-height: 200px;">
                    <div id="leftga1"></div>
                </div>
                <div class="body mbbody">
                    <ul>
                        <li><a target='_blank' href="https://en.wikipedia.org/wiki/Polyphase_merge_sort">Source</a></li>
                        <li><a target='_blank' href="https://en.wikipedia.org/w/index.php?title=Polyphase_merge_sort&action=history">Authors</a></li>

                                            </ul>
                </div>
                <h3>Languages</h3>
                <div class="body">
                <ul>
                <li class="interlanguage-link"><a lang="cs" hreflang="cs" href="https://cs.qaz.wiki/wiki/Polyphase_merge_sort" title="Třífázové sloučení">Čeština</a></li>
<li class="interlanguage-link"><a lang="de" hreflang="de" href="https://de.qaz.wiki/wiki/Polyphase_merge_sort" title="Mehrphasige Zusammenführungssortierung">Deutsch</a></li>
<li class="interlanguage-link"><a lang="es" hreflang="es" href="https://es.qaz.wiki/wiki/Polyphase_merge_sort" title="Clasificación de combinación polifásica">Español</a></li>
<li class="interlanguage-link"><a lang="fr" hreflang="fr" href="https://fr.qaz.wiki/wiki/Polyphase_merge_sort" title="Tri par fusion polyphase">Français</a></li>
<li class="interlanguage-link"><a lang="it" hreflang="it" href="https://it.qaz.wiki/wiki/Polyphase_merge_sort" title="Polyphase merge sort">Italiano</a></li>
<li class="interlanguage-link"><a lang="nl" hreflang="nl" href="https://nl.qaz.wiki/wiki/Polyphase_merge_sort" title="Sorteren voor samenvoegen van meerfasen">Nederlands</a></li>
<li class="interlanguage-link"><a lang="pl" hreflang="pl" href="https://pl.qaz.wiki/wiki/Polyphase_merge_sort" title="Sortowanie przez scalanie polifazowe">Polski</a></li>
<li class="interlanguage-link"><a lang="pt" hreflang="pt" href="https://pt.qaz.wiki/wiki/Polyphase_merge_sort" title="Classificação de fusão polifásica">Português</a></li>
<li class="interlanguage-link"><a lang="tr" hreflang="tr" href="https://tr.qaz.wiki/wiki/Polyphase_merge_sort" title="Çok fazlı birleştirme sıralaması">Türkçe</a></li>
<li class="interlanguage-link"><a lang="no" hreflang="no" href="https://no.qaz.wiki/wiki/Polyphase_merge_sort" title="Polyphase merge sort">Norsk</a></li>
<li class="interlanguage-link"><a lang="sv" hreflang="sv" href="https://sv.qaz.wiki/wiki/Polyphase_merge_sort" title="Sammanslagning av polyfas">Svenska</a></li>
<li class="interlanguage-link"><a lang="da" hreflang="da" href="https://da.qaz.wiki/wiki/Polyphase_merge_sort" title="Sortering af polyfase-fusion">Dansk</a></li>
<li class="interlanguage-link"><a lang="fi" hreflang="fi" href="https://fi.qaz.wiki/wiki/Polyphase_merge_sort" title="Monivaiheinen yhdistämislajittelu">Suomen kieli</a></li>
<li class="interlanguage-link"><a lang="hu" hreflang="hu" href="https://hu.qaz.wiki/wiki/Polyphase_merge_sort" title="Többfázisú egyesítés rendezése">Magyar</a></li>
<li class="interlanguage-link"><a lang="ro" hreflang="ro" href="https://ro.qaz.wiki/wiki/Polyphase_merge_sort" title="Sortare fuziune polifazică">Română</a></li>
                </div>

                <div class="body">
                    <ul>
                        <li><a href="/wiki/Grandad_of_Races" title="&lt;i&gt; Дедушка рас &lt;/i&gt; - &lt;i&gt;Grandad of Races&lt;/i&gt;">Previous article</a></li>
                        <li><a href="/wiki/Milan_Tepi%C4%87" title="Милан Тепич - Milan Tepić">Next article</a></li>
                    </ul>
                </div>

                <h3>In other projects</h3>
                <div class="body">
                    <ul>
                                            </ul>
                </div>
                <div id="leftga2"></div>
                <div id="leftga3"></div>
                <div id="leftga4"></div>
            </div>
        </div>
    </div>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"><div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	
	<h1 id="firstHeading" class="firstHeading"> Сортировка полифазным слиянием -  <span class="notranslate">Polyphase merge sort</span></h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint"> Из Википедии, бесплатной энциклопедии </div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		
		
		
		<div id="mw-content-text" dir="ltr" class="mw-content-ltr">
<div class="mw-parser-output">
<p> Полифазная сортировка слиянием - это разновидность  <a href="/wiki/Merge_sort" title="Сортировка слиянием"> сортировки слиянием </a>  снизу вверх,  которая сортирует список с использованием начального неравномерного распределения подсписок (прогонов), в основном используется для  <a href="/wiki/External_sorting" title="Внешняя сортировка"> внешней сортировки </a>  , и более эффективна, чем обычная сортировка слиянием, когда их меньше восьми. внешние рабочие файлы (например, ленточный накопитель или файл на жестком диске).  Полифазная сортировка слиянием не является  <a href="/wiki/Sorting_algorithm#Stability" title="Алгоритм сортировки"> стабильной </a>  .
 </p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" dir="ltr">
<h2 id="mw-toc-heading"> Содержание </h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Ordinary_merge_sort"><span class="tocnumber"> 1  </span> <span class="toctext"> Обычная сортировка слиянием </span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Polyphase_merge"><span class="tocnumber"> 2  </span> <span class="toctext"> Полифазное слияние </span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Perfect_3_file_polyphase_merge_sort"><span class="tocnumber"> 3  </span> <span class="toctext"> Идеальная 3-х файловая многофазная сортировка слиянием </span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Distribution_for_polyphase_merge_sort"><span class="tocnumber"> 4  </span> <span class="toctext"> Распределение для многофазной сортировки слиянием </span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Comparison_versus_ordinary_merge_sort"><span class="tocnumber"> 5  </span> <span class="toctext"> Сравнение с обычной сортировкой слиянием </span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#References"><span class="tocnumber"> 6  </span> <span class="toctext"> Ссылки </span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Further_reading"><span class="tocnumber"> 7  </span> <span class="toctext"> Дальнейшее чтение </span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#External_links"><span class="tocnumber"> 8  </span> <span class="toctext"> Внешние ссылки </span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Ordinary_merge_sort"> Обычная сортировка слиянием </span></h2>
<p><font style="vertical-align: inherit;"></font><a href="/wiki/Merge_sort" title="Сортировка слиянием"> Сортировка слияние </a>  разбивает запись набора данных в сортированные пробеги записей ,  а затем повторно сливается отсортированными бегут в большие отсортированные пробеги ,  пока только один прогон, отсортированный набор данные, остаются.
 </p>
<p> Обычная сортировка слиянием с использованием четырех рабочих файлов организует их как пару входных файлов и пару выходных файлов.  Набор данных равномерно распределяется между двумя рабочими файлами либо в виде отсортированных прогонов, либо, в простейшем случае, отдельных записей, которые можно рассматривать как отсортированные прогоны размера 1. После того, как весь набор данных передан в два рабочих файла, эти два рабочих файла становятся входными файлами для первой итерации слияния.  Каждая итерация слияния запускает слияние двух входных рабочих файлов, чередуя объединенный выход между двумя выходными файлами, снова распределяя объединенные прогоны равномерно между двумя выходными файлами (до последней итерации слияния).  После того, как все прогоны из двух входных файлов объединены и выведены, выходные файлы становятся входными файлами и наоборот для следующей итерации слияния.  Количество прогонов уменьшается в 2 раза на каждой итерации, например, 64, 32, 16, 8, 4, 2, 1. Для последней итерации слияния два входных файла имеют только один отсортированный прогон (1/2 из набор данных) каждый, а объединенный результат представляет собой один отсортированный прогон (отсортированный набор данных) для одного из выходных файлов.  Это также описано в  <a href="/wiki/Merge_sort#Use_with_tape_drives" title="Сортировка слиянием"> разделе Сортировка слиянием § Использование с ленточными накопителями </a>  .
 </p>
<p> Если есть только три рабочих файла, то обычная сортировка слиянием слияниями отсортированных запускает два рабочих файла в один рабочий файл, а затем распределяет запуски равномерно между двумя выходными файлами.  Итерация слияния уменьшает количество запусков в 2 раза, итерация с повторным распределением не уменьшает количество запусков (коэффициент равен 1).  Можно считать, что каждая итерация уменьшает количество запусков в среднем на  <span class="nowrap"> √  <span style="border-top:1px solid; padding:0 0.1em;"> 2 </span></span>  ≈ 1,41.  Если имеется 5 рабочих файлов, то шаблон чередуется между трехсторонним слиянием и двухсторонним слиянием для среднего коэффициента  <span class="nowrap"> √  <span style="border-top:1px solid; padding:0 0.1em;"> 6 </span></span>  ≈ 2,45.
 </p>
<p> В общем, для четного числа  <i> N </i>  рабочих файлов каждая итерация обычной сортировки слиянием уменьшает количество запусков в  <i> N </i>  / 2, в то время как для нечетного числа  <i> N </i>  рабочих файлов каждая итерация уменьшает количество запусков на средний коэффициент. из  <span class="nowrap"> √  <span style="border-top:1px solid; padding:0 0.1em;"> (  <i> N  </i><sup> 2 </sup>  −1) / 4 </span></span>  =  <span class="nowrap"> √  <span style="border-top:1px solid; padding:0 0.1em;"><i> N  </i><sup> 2 </sup>  −1 </span></span>  / 2.
 </p>
<h2><span class="mw-headline" id="Polyphase_merge"> Полифазное слияние </span></h2>
<p> Для  <i> N </i>  &lt;8 рабочих файлов многофазная сортировка слиянием обеспечивает более высокий коэффициент сокращения эффективного счетчика прогонов за счет неравномерного распределения отсортированных прогонов между  <i> N </i>  -1 рабочим файлом (поясняется в следующем разделе).  Каждая итерация слияния запускает  <i> N </i>  -1 рабочих файлов в один выходной рабочий файл.  Когда  достигается  конец одного из  <i> N </i>  -1 рабочих файлов, он становится новым выходным файлом, а то, что было выходным файлом, становится одним из  <i> N </i>  -1 рабочих входных файлов, начиная новую итерацию многофазной сортировки слиянием.  Каждая итерация объединяет только часть набора данных (примерно от 1/2 до 3/4), за исключением последней итерации, которая объединяет весь набор данных в один отсортированный прогон.  Начальное распределение настроено так, что за раз очищается только один входной рабочий файл, за исключением последней итерации слияния, которая объединяет  <i> N </i>  -1 отдельных прогонов (разного размера, это объясняется далее) из  <i> N </i>  -1 входных рабочих файлов. в один выходной файл, что приведет к единственному отсортированному запуску отсортированного набора данных.
 </p>
<p> Для каждой многофазной итерации общее количество прогонов следует шаблону, аналогичному обратным  <a href="/wiki/Fibonacci_numbers_of_higher_order" class="mw-redirect" title="Числа Фибоначчи высшего порядка"> числам Фибоначчи </a>  последовательности </font><a href="/wiki/Fibonacci_numbers_of_higher_order" class="mw-redirect" title="Fibonacci numbers of higher order"><font style="vertical-align: inherit;">более высокого порядка</font></a><font style="vertical-align: inherit;"> .  С 4 файлами и набором данных, состоящим из 57 запусков, общее количество запусков на каждой итерации будет 57, 31, 17, 9, 5, 3, 1. Обратите внимание, что, за исключением последней итерации, коэффициент уменьшения количества запусков равен немного меньше 2, 57/31, 31/17, 17/9, 9/5, 5/3, 3/1, около 1,84 для случая с 4 файлами, но каждая итерация, кроме последней, уменьшала количество запусков при обработке около 65% набора данных, поэтому коэффициент уменьшения количества запусков на набор данных, обработанный во время промежуточных итераций, составляет около 1,84 / 0,65 = 2,83.  Для набора данных, состоящего из 57 прогонов по 1 записи в каждом, затем после начального распределения многофазная сортировка слиянием перемещает 232 записи в течение 6 итераций, необходимых для сортировки набора данных, с общим коэффициентом сокращения 2,70 (более подробно это объясняется позже. ).
 </p>
<p> После первой многофазной итерации выходной файл теперь содержит результаты слияния  <i> N </i>  −1 исходных запусков, но оставшиеся  <i> N </i>  −2 входных рабочих файлов по-прежнему содержат оставшиеся исходные запуски, поэтому вторая итерация слияния дает запуски размера (  <i> N </i>  −1) + (  <i> N </i>  −2) = (2  <i> N </i>  - 3) исходных прогонов.  Третья итерация производит серии  оригинальных прогонов  размером (4  <i> N </i>  - 7).  С 4 файлами первая итерация создает прогоны размера 3 исходных прогонов, вторая итерация 5 исходных прогонов, третья итерация 9 исходных прогонов и так далее, следуя шаблону, подобному Фибоначчи, 1, 3, 5, 9, 17, 31, 57, ..., поэтому увеличение размера серии следует по той же схеме, что и уменьшение количества запусков в обратном порядке.  В примере с 4 файлами и 57 запусками по 1 записи каждая последняя итерация объединяет 3 прогона размером 31, 17, 9, в результате получается один отсортированный прогон размером 31 + 17 + 9 = 57 записей, отсортированный набор данных.  Пример количества запусков и размеров запусков для 4 файлов, 31 запись можно найти в таблице 4.3.
 </p>
<h2><span class="mw-headline" id="Perfect_3_file_polyphase_merge_sort"> Идеальная 3-х файловая многофазная сортировка слиянием </span></h2>
<p> Проще всего рассматривать многофазное слияние, начиная с его конечных условий и работая в обратном направлении.  В начале каждой итерации будет два входных файла и один выходной файл.  В конце итерации один входной файл будет полностью использован и станет выходным файлом для следующей итерации.  Текущий выходной файл станет входным файлом для следующей итерации.  Остальные файлы (только один из трех файлов) были израсходованы только частично, и их оставшиеся прогоны будут введены для следующей итерации.
 </p>
<p> Файл 1 только что очистился и стал новым выходным файлом.  На каждой входной ленте остается по одному прогону, и объединение этих прогонов вместе создаст отсортированный файл.
 </p>
<pre class="notranslate">File 1 (out):                                           &lt;1 run&gt; *        (the sorted file)
File 2 (in ): ... | &lt;1 run&gt; *               --&gt;     ... &lt;1 run&gt; | *          (consumed)
File 3 (in ):     | &lt;1 run&gt; *                           &lt;1 run&gt; | *          (consumed)

...  possible runs that have already been read
|    marks the read pointer of the file
*    marks end of file
</pre>
<p> Возвращаясь к предыдущей итерации, мы читали с 1 и 2. Один прогон объединяется с 1 и 2, прежде чем файл 1 станет пустым.  Обратите внимание, что файл 2 не используется полностью - у него осталось одно выполнение, чтобы соответствовать окончательному слиянию (см. Выше).
 </p>
<pre class="notranslate">File 1 (in ): ... | &lt;1 run&gt; *                      ... &lt;1 run&gt; | *
File 2 (in ):     | &lt;2 run&gt; *           --&gt;            &lt;1 run&gt; | &lt;1 run&gt; *
File 3 (out):                                          &lt;1 run&gt; *
</pre>
<p> Возвращаясь к другой итерации, 2 прогона объединяются с 1 и 3, прежде чем файл 3 станет пустым.
 </p>
<pre class="notranslate">File 1 (in ):     | &lt;3 run&gt;                        ... &lt;2 run&gt; | &lt;1 run&gt; *
File 2 (out):                               --&gt;        &lt;2 run&gt; *
File 3 (in ): ... | &lt;2 run&gt; *                          &lt;2 run&gt; | *
</pre>
<p> Возвращаясь к другой итерации, 3 прогона объединяются из 2 и 3, прежде чем файл 2 станет пустым.
 </p>
<pre class="notranslate">File 1 (out):                                          &lt;3 run&gt; *
File 2 (in ): ... | &lt;3 run&gt; *               --&gt;    ... &lt;3 run&gt; | *
File 3 (in ):     | &lt;5 run&gt; *                          &lt;3 run&gt; | &lt;2 run&gt; *
</pre>
<p> Возвращаясь к другой итерации, 5 прогонов объединяются из 1 и 2, прежде чем файл 1 станет пустым.
 </p>
<pre class="notranslate">File 1 (in ): ... | &lt;5 run&gt; *                      ... &lt;5 run&gt; | *
File 2 (in ):     | &lt;8 run&gt; *               --&gt;        &lt;5 run&gt; | &lt;3 run&gt; *
File 3 (out):                                          &lt;5 run&gt; *
</pre>
<h2><span class="mw-headline" id="Distribution_for_polyphase_merge_sort"> Распределение для многофазной сортировки слиянием </span></h2>
<p> Глядя на идеальный вариант из трех файлов, количество прогонов для объединенной работы в обратном направлении: 1, 1, 2, 3, 5, ... показывает последовательность Фибоначчи.  Последовательность для более чем трех файлов немного сложнее;  для 4 файлов, начиная с конечного состояния и работая в обратном направлении, шаблон счетчика запусков равен {1,0,0,0}, {0,1,1,1}, {1,0,2,2}, {3 , 2,0,4}, {7,6,4,0}, {0,13,11,7}, {13,0,24,20}, ....
 </p>
<p> Чтобы все работало оптимально, последняя фаза слияния должна иметь ровно один запуск для каждого входного файла.  Если какой-либо входной файл имеет более одного запуска, потребуется еще один этап.  Следовательно, сортировка с многофазным слиянием должна быть продумана в отношении начального распределения прогонов входных данных по исходным выходным файлам.  Например, входной файл с 13 запусками будет записывать 5 запусков в файл 1 и 8 запусков в файл 2.
 </p>
<p> На практике входной файл не будет иметь точное количество прогонов, необходимое для идеального распределения.  Один из способов справиться с этим - дополнить фактическое распределение воображаемыми «фиктивными прогонами», чтобы смоделировать идеальное распределение прогонов.  Пробный запуск ведет себя как пробег без записей.  Объединение одного или нескольких фиктивных прогонов с одним или несколькими реальными прогонами просто объединяет реальные прогоны, а объединение одного или нескольких фиктивных прогонов без реальных прогонов приводит к одному фиктивному прогону.  Другой подход - эмулировать фиктивные прогоны по мере необходимости во время операций слияния. 
 </p>
<p> «Оптимальные» алгоритмы распределения требуют заранее знать количество прогонов.  В противном случае, в более распространенном случае, когда количество прогонов заранее неизвестно, используются алгоритмы «почти оптимального» распределения.  Некоторые алгоритмы распределения включают перегруппировку прогонов.  Если количество прогонов известно заранее, перед началом фаз слияния необходимо только частичное распределение.  Например, рассмотрим вариант из 3 файлов, начиная с  <i> n </i>  запусков в File_1.  Определим  <i> F  <sub> i </sub></i>  =  <i> F  </i><sub><i> i </i>  −1 </sub>  + F  <sub><i> i </i>  −2 </sub>  как  <i> i- </i>  е  <a href="/wiki/Fibonacci_number" title="Число Фибоначчи"> число Фибоначчи </a>  .  Если  <i> n </i>  =  <i> F  <sub> i </sub></i>  , то перемещение  <i> F  </i><sub><i> i </i>  −2 </sub>  выполняется в File_2, оставляя  <i> F  </i><sub><i> i </i>  −1 </sub>  запусков, оставшихся в File_1, идеальное распределение запусков.  Если  <i> F  <sub> i </sub></i>  &lt;  <i> n </i>  &lt;  <i> F  </i><sub><i> i </i>  +1 </sub>  , move  <i> n </i>  -  <i> F  <sub> i </sub></i>  переходит в File_2, а  <i> F  </i><sub><i> i </i>  +1 </sub>  -  <i> n </i>  -  в File_3.  Первая итерация слияния объединяет  <i> n </i>  -  <i> F  <sub> i </sub></i>  запусков из File_1 и File_2, добавляя  <i> n </i>  -  <i> F  <sub> i </sub></i>  слитных  запусков к  <i> F  </i><sub><i> i </i>  +1 </sub>  -  <i> n </i>  запускам, уже перемещенным в File_3.  В конце File_1 остается  <i> F  </i><sub><i> i </i>  −2 </sub>  запусков, File_2 очищается, а File_3 заканчивается  <i> F  </i><sub><i> i </i>  −1 </sub>  запусков, снова идеальное распределение запусков.  Для 4 или более файлов математика более сложная, но концепция та же.
 </p>
<h2><span class="mw-headline" id="Comparison_versus_ordinary_merge_sort"> Сравнение с обычной сортировкой слиянием </span></h2>
<p> После начального распределения обычная сортировка слиянием с использованием 4 файлов сортирует 16 прогонов отдельных записей в 4 итерациях всего набора данных, перемещая в общей сложности 64 записи для сортировки набора данных после начального распределения.  Сортировка многофазным слиянием с использованием 4 файлов будет отсортировать 17 запусков отдельных записей за 4 итерации, но поскольку каждая итерация, но последняя итерация перемещает только часть набора данных, перемещается всего 48 записей, чтобы отсортировать набор данных после начальной распространение.  В этом случае обычный коэффициент сортировки слиянием равен 2,0, а общий коэффициент многофазности составляет ≈2,73.
 </p>
<p> Чтобы объяснить, как коэффициент уменьшения связан с производительностью сортировки, используются следующие уравнения коэффициента уменьшения:
 </p>
<pre class="notranslate">reduction_factor = exp(number_of_runs*log(number_of_runs)/run_move_count)
run_move_count = number_of_runs * log(number_of_runs)/log(reduction_factor)
run_move_count = number_of_runs * log_reduction_factor(number_of_runs)
</pre>
<p> Использование уравнения подсчета ходов для приведенных выше примеров: 
 </p>
<ul>
<li> обычная сортировка слиянием →  , <span class="mwe-math-element"><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math xmlns="http://www.w3.org/1998/Math/MathML" alttext="{\displaystyle 16\times \log _{2}(16)=64}">
  <semantics>
    <mrow class="MJX-TeXAtom-ORD">
      <mstyle displaystyle="true" scriptlevel="0">
        <mn> 16 </mn>
        <mo> × </mo>
        <msub>
          <mi> журнал </mi>
          <mrow class="MJX-TeXAtom-ORD">
            <mn> 2 </mn>
          </mrow>
        </msub>
        <mo> ⁡ </mo>
        <mo stretchy="false"> ( </mo>
        <mn> 16 </mn>
        <mo stretchy="false"> ) </mo>
        <mo> знак равно </mo>
        <mn> 64 </mn>
      </mstyle>
    </mrow>
    <annotation encoding="application/x-tex"> {\ Displaystyle 16 \ раз \ журнал _ {2} (16) = 64} </annotation>
  </semantics>
</math></span><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/8c5c348ca3f0c41b6ea33353cb9be4f860c513dc" class="mwe-math-fallback-image-inline" aria-hidden="true" style="vertical-align: -0.838ex; width:18.749ex; height:2.843ex;" alt="{\ Displaystyle 16 \ раз \ журнал _ {2} (16) = 64}"></span><font style="vertical-align: inherit;"></font></li>
<li> многофазная сортировка слиянием →  . <span class="mwe-math-element"><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math xmlns="http://www.w3.org/1998/Math/MathML" alttext="{\displaystyle 17\times \log _{2.73}(17)=48}">
  <semantics>
    <mrow class="MJX-TeXAtom-ORD">
      <mstyle displaystyle="true" scriptlevel="0">
        <mn> 17 </mn>
        <mo> × </mo>
        <msub>
          <mi> журнал </mi>
          <mrow class="MJX-TeXAtom-ORD">
            <mn> 2,73 </mn>
          </mrow>
        </msub>
        <mo> ⁡ </mo>
        <mo stretchy="false"> ( </mo>
        <mn> 17 </mn>
        <mo stretchy="false"> ) </mo>
        <mo> знак равно </mo>
        <mn> 48 </mn>
      </mstyle>
    </mrow>
    <annotation encoding="application/x-tex"> {\ Displaystyle 17 \ раз \ журнал _ {2.73} (17) = 48} </annotation>
  </semantics>
</math></span><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/d77ef30290856e53786b95fc192ac08a3fc4d556" class="mwe-math-fallback-image-inline" aria-hidden="true" style="vertical-align: -0.838ex; width:20.85ex; height:2.843ex;" alt="{\ Displaystyle 17 \ раз \ журнал _ {2.73} (17) = 48}"></span><font style="vertical-align: inherit;"></font></li>
</ul>
<p> Вот таблица эффективных коэффициентов уменьшения для многофазной и обычной сортировки слиянием, перечисленных по количеству файлов, на основе фактических сортировок из нескольких миллионов записей.  Эта таблица примерно соответствует коэффициенту сокращения для перемещаемых таблиц набора данных, показанных на рис. 3 и рис. 4  <a rel="nofollow" class="external text" href="http://www.computer.org/csdl/proceedings/afips/1960/5057/00/50570143.pdf"> многофазного слияния sort.pdf. </a>
</p>
<pre class="notranslate"># files
|     average fraction of data per iteration
|     |     polyphase reduction factor on ideal sized data
|     |     |     ordinary reduction factor on ideal sized data
|     |     |     |
3     .73   1.94  1.41  (sqrt  2)
4     .63   2.68  2.00
5     .58   3.20  2.45  (sqrt  6)
6     .56   3.56  3.00
7     .55   3.80  3.46  (sqrt 12)
8     .54   3.95  4.00
9     .53   4.07  4.47  (sqrt 20)
10    .53   4.15  5.00
11    .53   4.22  5.48  (sqrt 30)
12    .53   4.28  6.00
32    .53   4.87 16.00
</pre>
<p> В общем, многофазная сортировка слиянием лучше, чем обычная сортировка слиянием, когда файлов меньше 8, в то время как обычная сортировка слиянием начинает улучшаться примерно с 8 или более файлами.
 </p>
<h2><span class="mw-headline" id="References"> Рекомендации </span></h2>

<h2><span class="mw-headline" id="Further_reading"> дальнейшее чтение </span></h2>
<ul>
<li>
<cite class="citation cs2"> Брэдли, Джеймс (1982),  <span class="cs1-lock-registration" title="Требуется бесплатная регистрация"><a rel="nofollow" class="external text" href="https://archive.org/details/filedatabasetech0000brad"><i> методы работы с файлами и базами данных </i></a></span>  , Холт, Райнхарт и Уинстон,  <a href="/wiki/ISBN_(identifier)" class="mw-redirect" title="ISBN (идентификатор)"> ISBN </a>&nbsp;<a href="/wiki/Special:BookSources/0-03-058673-9" title="Special: BookSources / 0-03-058673-9"><bdi> 0-03-058673-9 </bdi></a></cite><span title="ctx_ver = Z39.88-2004 &amp; rft_val_fmt = info% 3Aofi% 2Ffmt% 3Akev% 3Amtx% 3Abook &amp; rft.genre = book &amp; rft.btitle = File + and + Data + Base + Techniques &amp; rft.pub = Holt% 2C + Winhart &amp; rft + and + 1982 &amp; rft.isbn = 0-03-058673-9 &amp; rft.aulast = Bradley &amp; rft.aufirst = James &amp; rft_id = https% 3A% 2F% 2Farchive.org% 2Fdetails% 2Ffiledatabasetech0000brad &amp; rfr_id = info% 3Asid% 2Fen.wikipedia.org + sortphase.org" class="Z3988"></span>
</li>
<li>
<cite class="citation cs2"> Рейнольдс, Сэмюэл У. (август 1961), "Алгоритм слияния обобщен многофазный",  <i> коммуникаций в АКМ </i>  , Нью -  Йорк, Нью -  Йорк: АКМ,  <b> 4 </b>  (8): 347-349,  <a href="/wiki/Doi_(identifier)" class="mw-redirect" title="Дои (идентификатор)"> DOI </a>  :  <a rel="nofollow" class="external text" href="https://doi.org/10.1145%2F366678.366689"> 10,1145 / 366678.366689 </a></cite><span title="ctx_ver = Z39.88-2004 &amp; rft_val_fmt = info% 3Aofi% 2Ffmt% 3Akev% 3Amtx% 3Ajournal &amp; rft.genre = article &amp; rft.jtitle = Коммуникации + of + the + ACM &amp; rft.atitle = A + generalized + algorithm polyphase &amp; rft. issue = 8 &amp; rft.pages = 347-349 &amp; rft.date = 1961-08 &amp; rft_id = info% 3Adoi% 2F10.1145% 2F366678.366689 &amp; rft.aulast = Reynolds &amp; rft.aufirst = Samuel + W. &amp; rfr_id = info% 3Asid% 2Fen.wikipedia. 3A Полифаза + слияние + сортировка" class="Z3988"></span>
</li>
<li>
<cite class="citation cs2"> Седжвик, Роберт (1983),  <span class="cs1-lock-registration" title="Требуется бесплатная регистрация"><a rel="nofollow" class="external text" href="https://archive.org/details/algorithms00sedg/page/163"><i> Алгоритмы </i></a></span>  , Эддисон-Уэсли, стр.&nbsp;  <a rel="nofollow" class="external text" href="https://archive.org/details/algorithms00sedg/page/163"> 163–165 </a>  ,  <a href="/wiki/ISBN_(identifier)" class="mw-redirect" title="ISBN (идентификатор)"> ISBN </a>&nbsp;<a href="/wiki/Special:BookSources/0-201-06672-6" title="Special: BookSources / 0-201-06672-6"><bdi> 0-201-06672-6 </bdi></a></cite><span title="ctx_ver = Z39.88-2004 &amp; rft_val_fmt = info% 3Aofi% 2Ffmt% 3Akev% 3Amtx% 3Abook &amp; rft.genre = book &amp; rft.btitle = Алгоритмы &amp; rft.pages = 163-165 &amp; rft.pub = &amp; 0dison-Wesley = &amp; rft. 06672-6 &amp; rft.aulast = Sedgewick &amp; rft.aufirst = Роберт &amp; rft_id = https% 3A% 2F% 2Farchive.org% 2Fdetails% 2Falgorithms00sedg% 2Fpage% 2F163 &amp; rfr_id = info% 3Asid% 2Fen.wikipedia.org + sortphase.org + sortphase." class="Z3988"></span>
</li>
</ul>
<h2><span class="mw-headline" id="External_links"> внешние ссылки </span></h2>





</div>
<noscript>&lt;img src="https://en.wikipedia.org/wiki/Special:CentralAutoLogin/start?type=1x1" alt="" title="" width="1" height="1" style="border: none; position: absolute;"&gt;</noscript>
</div>
		
	</div>
</div>
<div id="mw-data-after-content">
	<div class="read-more-container"></div>
</div>


<footer id="footer" class="mw-footer" role="contentinfo">
	<ul id="footer-info">
	<li id="footer-info-lastmod"> Эта страница последний раз была отредактирована 11 января 2021 года в 21:50  <span class="anonymous-show"> &nbsp;(UTC) </span>  . </li>
	<li id="footer-info-copyright"> Текст доступен по  <a rel="license" href="//en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License"> лицензии Creative Commons Attribution-ShareAlike </a><a rel="license" href="//creativecommons.org/licenses/by-sa/3.0/" style="display:none;"></a>  ;  могут применяться дополнительные условия.  Используя этот сайт, вы соглашаетесь с  <a href="//foundation.wikimedia.org/wiki/Terms_of_Use"> Условиями использования </a>  и  <a href="//foundation.wikimedia.org/wiki/Privacy_policy"> Политикой конфиденциальности </a>  .  Wikipedia® является зарегистрированным товарным знаком  некоммерческой организации  <a href="//www.wikimediafoundation.org/"> Wikimedia Foundation, Inc. </a><font style="vertical-align: inherit;"></font></li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://foundation.wikimedia.org/wiki/Privacy_policy" class="extiw" title="wmf: Политика конфиденциальности"> Политика конфиденциальности </a></li>
	<li id="footer-places-about"><a href="/wiki/Wikipedia:About" title="Википедия: О"> О Википедии </a></li>
	<li id="footer-places-disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Википедия: Общий отказ от ответственности"> Отказ от ответственности </a></li>
	<li id="footer-places-contact"><a href="//en.wikipedia.org/wiki/Wikipedia:Contact_us"> Связаться с Википедией </a></li>
	<li id="footer-places-mobileview"><a href="//en.m.wikipedia.org/w/index.php?title=Polyphase_merge_sort&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle"> Мобильный вид </a></li>
	<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute"> Разработчики </a></li>
	<li id="footer-places-statslink"><a href="https://stats.wikimedia.org/#/en.wikipedia.org"> Статистика </a></li>
	<li id="footer-places-cookiestatement"><a href="https://foundation.wikimedia.org/wiki/Cookie_statement"> Заявление о файлах cookie </a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://wikimediafoundation.org/"><img src="https://en.wikipedia.org/static/images/footer/wikimedia-button.png" srcset="/static/images/footer/wikimedia-button-1.5x.png 1.5x, /static/images/footer/wikimedia-button-2x.png 2x" width="88" height="31" alt="Фонд Викимедиа" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="https://en.wikipedia.org/static/images/footer/poweredby_mediawiki_88x31.png" alt="На платформе MediaWiki" srcset="/static/images/footer/poweredby_mediawiki_132x47.png 1.5x, /static/images/footer/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></a></li>
</ul>

	<div style="clear: both;"></div>
</footer>







<!-- RevID: 999771163 -->
<!-- Updated: 2021-01-21 06:49:59 -->
<!-- /Desktop version -->
    <div id="footer" role="contentinfo" style="margin-left: 10em;">
    <ul id="footer-info">
        <li id="footer-info-copyright" class="footerli">This page is based on the copyrighted Wikipedia article <a target='_blank' href="https://en.wikipedia.org/wiki/Polyphase_merge_sort">"Polyphase_merge_sort"</a> (<a target='_blank' href="https://en.wikipedia.org/w/index.php?title=Polyphase_merge_sort&action=history">Authors</a>); it is used under the <a rel="license" target="_blank" href="//en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>. You may redistribute it, verbatim or modified, providing that you comply with the terms of the CC-BY-SA.
        </li><br>
        <li id="footer-info-coockie" class="footerli">
            <a rel="license" target="_blank" href="/cookie-policy">Cookie-policy</a>
        </li>
        <li id="footer-info-contacts" class="footerli">
        &nbsp; &nbsp; &nbsp; To contact us: mail to <a href="mailto:admin@qwerty.wiki">admin@qwerty.wiki</a>
        </li>
        <br>
        <hr>
        <li class="footerli" style="background-color: #fcc; font-size: 100%; font-weight: bold;">
            <a href="#" onclick="if(window.__lxG__consent__!==undefined&&window.__lxG__consent__.getState()!==null){window.__lxG__consent__.showConsent()} else {alert('This function only for users from European Economic Area (EEA)')}; return false">&nbsp;Change&nbsp;privacy&nbsp;settings&nbsp;</a>
        </li>
    </ul>
    <br>
    <br>
    <br>
    <br>
    <br>
</div><div id="mw-body">
</div>


<!-- ADV -->
<script type="application/javascript">$(document).ready(start);</script>
<!-- /ADV -->

</body>
</html>
<!-- V2.1 time_gen: 0.006167 sec. -->